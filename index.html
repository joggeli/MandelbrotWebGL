<!DOCTYPE html>
<html><head>
	<title>Mandelbroetchen</title>
	<script src="jquery-3.2.1.min.js"></script>
	<script src="gl-matrix/dist/gl-matrix.js"></script>
	<script src="gfw.js"></script>
	<script src="game.js"></script>
	<link rel="stylesheet" type="text/css" href="gfw.css">
	<link rel="stylesheet" type="text/css" href="game.css">
	<script type="x-shader/x-vertex" id="vertex-shader">
		attribute vec3 a_pos;
		void main() {
			gl_Position = vec4(a_pos, 1.0);
			gl_PointSize = 64.0;
		}
	</script>
	<script type="x-shader/x-fragment" id="fragment-shader">
		precision highp float;
		uniform float u_green_off;
		uniform mat3 u_transform;
		void main() {
			vec3 coords = u_transform * vec3(gl_FragCoord.x, gl_FragCoord.y, 1.0);
		/*	float dst = sqrt(coords.x*coords.x + coords.y*coords.y);
			if(dst <= 64.0){
				float c = dst/64.0*u_green_off;
				gl_FragColor = vec4(1.0-c, 0.0, c, 1.0);
			} else {
				gl_FragColor = vec4((coords.x+128.0)/256.0, u_green_off, 0, 1.0);
			}  */
			float cr = coords.x;
			float ci = coords.y;
			float zr = cr;
			float zi = ci;
			float zr_sqr = cr*cr;
			float zi_sqr = ci*ci;
			float a, b, c, d;
			for(int iter = 0; iter < 50; iter++){
				float a = zr;
				float b = zi;
				zr = a*a-b*b + cr;
				zi = a*b+b*a + ci;
				zr_sqr = zr*zr;
				zi_sqr = zi*zi;
				if(zr_sqr+zi_sqr > 4.0){
					gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);
					return;
				}
			}			
			gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
		}
	</script>
</head><body>
	<div id="left-anchor" class="noselect">
		<div id="monitor-box">
			<div class="monitor-header">monitor</div>
		</div>
		<div id="controls-box">
			<div class="controls-header">controls</div>
		</div>
	</div>
	<div id="left-anchor-2"></div>
</body></html>